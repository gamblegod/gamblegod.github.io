<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Huawei E9000 Switch Module Configure | Just for fun</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="万事开头难！新搭建的博客平台有一个多月了，今天终于鼓起勇气在这个凄惨的平安夜里来写点什么。最近两天一直在鼓捣华为的E9000刀箱，好好的研究了下它的交换模块。先说下我们的配置吧，1台E9000刀框，2个CX110以太网交换模块，2个CX210 SAN网络交换模块。7台CH240全宽刀片，每台分别安装MZ110和MZ910卡。刀框背后有两个MM910管理模块（主备关系），默认IP地址分别为192.1">
<meta property="og:type" content="article">
<meta property="og:title" content="Huawei E9000 Switch Module Configure">
<meta property="og:url" content="http://yoursite.com/2015/12/24/Huawei E9000 Switch Module/index.html">
<meta property="og:site_name" content="Just for fun">
<meta property="og:description" content="万事开头难！新搭建的博客平台有一个多月了，今天终于鼓起勇气在这个凄惨的平安夜里来写点什么。最近两天一直在鼓捣华为的E9000刀箱，好好的研究了下它的交换模块。先说下我们的配置吧，1台E9000刀框，2个CX110以太网交换模块，2个CX210 SAN网络交换模块。7台CH240全宽刀片，每台分别安装MZ110和MZ910卡。刀框背后有两个MM910管理模块（主备关系），默认IP地址分别为192.1">
<meta property="og:image" content="http://yoursite.com/images/E9000/E9000.png">
<meta property="og:image" content="http://yoursite.com/images/E9000/Mezz.png">
<meta property="og:updated_time" content="2016-01-16T06:23:09.119Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Huawei E9000 Switch Module Configure">
<meta name="twitter:description" content="万事开头难！新搭建的博客平台有一个多月了，今天终于鼓起勇气在这个凄惨的平安夜里来写点什么。最近两天一直在鼓捣华为的E9000刀箱，好好的研究了下它的交换模块。先说下我们的配置吧，1台E9000刀框，2个CX110以太网交换模块，2个CX210 SAN网络交换模块。7台CH240全宽刀片，每台分别安装MZ110和MZ910卡。刀框背后有两个MM910管理模块（主备关系），默认IP地址分别为192.1">
  
    <link rel="alternative" href="/atom.xml" title="Just for fun" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">
  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">Just for fun</a>
      </h1>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><button type="submit" class="search-form-submit">&#xF002;</button><input type="hidden" name="sitesearch" value="http://yoursite.com"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main"><article id="post-Huawei E9000 Switch Module" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2015/12/24/Huawei E9000 Switch Module/" class="article-date">
  <time datetime="2015-12-24T08:22:53.000Z" itemprop="datePublished">2015-12-24</time>
</a>
    
  <div class="article-category">
    <a class="article-category-link" href="/categories/VMware/">VMware</a>
  </div>

  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 class="article-title" itemprop="name">
      Huawei E9000 Switch Module Configure
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>万事开头难！新搭建的博客平台有一个多月了，今天终于鼓起勇气在这个凄惨的平安夜里来写点什么。最近两天一直在鼓捣华为的E9000刀箱，好好的研究了下它的交换模块。<br>先说下我们的配置吧，1台E9000刀框，2个CX110以太网交换模块，2个CX210 SAN网络交换模块。7台CH240全宽刀片，每台分别安装MZ110和MZ910卡。<br>刀框背后有两个MM910管理模块（主备关系），默认IP地址分别为192.168.2.1/2，虚拟地址192.168.2.3。可以插4个交换模块，还是来个图比较直观：<br><img src="/images/E9000/E9000.png" alt="E9000"><br>刀框SAN网络交换模块连接SNS2248光纤交换机，以太网交换模块连接CE12808网络交换机。计算节点Mezz卡与交换模块对应关系如下（原谅我图画的比较丑）：<br><img src="/images/E9000/Mezz.png" alt="Mezz_to_switch_module"></p>
<h2 id="CX210_SAN交换模块配置">CX210 SAN交换模块配置</h2><p>CX210可以理解为一台对外8个8GB FC接口的SAN交换机，对内16个8GB FC接口分别对应各个槽位的计算节点，具体对应关系稍后会有详细说明。<br>对外的FC接口连接华为SNS2248光纤交换机，当CX210上连另一台SAN交换机时会有两种模式：<br>1）设置CX210为AG（Access Gateway）模式，以N-PORT方式上连，在上连的交换机上为其配置Zone；<br>2）设置CX210为Native模式（默认情况），以E-PORT方式上连，也就是我们常说的交换机级联；<br>由于没有买级联的License，所以我们也只能将CX210配置为AG模式。</p>
<p>介绍配置步骤前先来普及下SAN交换机端口类型：<br>N端口：Node Port节点端口；节点连接点，光纤通道通信的终端；<br>E端口：Expansion Port 扩展端口；用于通过ISL（内部交换链接）连接多个交换机<br>F端口：Fabric Port 光纤端口；一种交换连接端口，也就是两个N端口连接的”中间端口”<br>G端口：Generic Port 通用端口；可根据连接方式，在F端口和E端口之间进行切换</p>
<h3 id="CX210_AG模式配置方法">CX210 AG模式配置方法</h3><p>检查CX210当前配置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line">FC_SW:admin&gt; switchshow </span><br><span class="line">switchName:     FC_SW</span><br><span class="line">switchType:     <span class="number">134.1</span></span><br><span class="line">switchState:    Online   </span><br><span class="line">switchMode:     Native</span><br><span class="line">switchRole:     Principal</span><br><span class="line">switchDomain:   <span class="number">1</span></span><br><span class="line">switchId:       fffc01</span><br><span class="line">switchWwn:      <span class="number">10</span>:<span class="number">00</span>:<span class="number">50</span>:eb:<span class="number">1</span>a:e0:<span class="number">58</span>:a4</span><br><span class="line">zoning:         OFF</span><br><span class="line">switchBeacon:   OFF</span><br><span class="line"></span><br><span class="line">Index Port Address Media Speed       State   Proto</span><br><span class="line">==================================================</span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">010000</span>   cu    <span class="number">8</span>G       No_Sync     FC  Disabled (Persistent) </span><br><span class="line">   <span class="number">1</span>   <span class="number">1</span>   <span class="number">010100</span>   id    N8       Online      FC  E-Port  segmented,<span class="number">10</span>:<span class="number">00</span>:<span class="number">50</span>:eb:<span class="number">1</span>a:ba:<span class="number">71</span>:d3 (No Fabric License)</span><br><span class="line">   <span class="number">2</span>   <span class="number">2</span>   <span class="number">010200</span>   id    N8       Online      FC  E-Port  segmented,<span class="number">10</span>:<span class="number">00</span>:<span class="number">50</span>:eb:<span class="number">1</span>a:ba:<span class="number">71</span>:d3 (No Fabric License)</span><br><span class="line">   <span class="number">3</span>   <span class="number">3</span>   <span class="number">010300</span>   id    N8       No_Light    FC  </span><br><span class="line">   <span class="number">4</span>   <span class="number">4</span>   <span class="number">010400</span>   id    N8       No_Light    FC  </span><br><span class="line">   <span class="number">5</span>   <span class="number">5</span>   <span class="number">010500</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">6</span>   <span class="number">6</span>   <span class="number">010600</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">7</span>   <span class="number">7</span>   <span class="number">010700</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">8</span>   <span class="number">8</span>   <span class="number">010800</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">9</span>   <span class="number">9</span>   <span class="number">010900</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">10</span>  <span class="number">10</span>   <span class="number">010</span>a00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">11</span>  <span class="number">11</span>   <span class="number">010</span>b00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">12</span>  <span class="number">12</span>   <span class="number">010</span>c00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">13</span>  <span class="number">13</span>   <span class="number">010</span>d00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">14</span>  <span class="number">14</span>   <span class="number">010</span>e00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">15</span>  <span class="number">15</span>   <span class="number">010</span>f00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">16</span>  <span class="number">16</span>   <span class="number">011000</span>   cu    <span class="number">8</span>G       No_Sync     FC  Disabled (Persistent) </span><br><span class="line">  <span class="number">17</span>  <span class="number">17</span>   <span class="number">011100</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">18</span>  <span class="number">18</span>   <span class="number">011200</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">19</span>  <span class="number">19</span>   <span class="number">011300</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">20</span>  <span class="number">20</span>   <span class="number">011400</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">21</span>  <span class="number">21</span>   <span class="number">011500</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">22</span>  <span class="number">22</span>   <span class="number">011600</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">23</span>  <span class="number">23</span>   <span class="number">011700</span>   cu    <span class="number">8</span>G       No_Sync     FC</span><br></pre></td></tr></table></figure></p>
<p>默认情况下CX210为Native模式，连接到SNS2248交换机的端口状态为E-PORT，但没有级联License。</p>
<p>将CX210修改为AG模式<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br></pre></td><td class="code"><pre><span class="line">FC_SW:admin&gt; switchdisable</span><br><span class="line"></span><br><span class="line">FC_SW:admin&gt; ag --modeenable</span><br><span class="line">WARNING: Access Gateway mode changes the standard behavior of the switch. Please check Access Gateway Administrator<span class="string">'s Guide before proceeding.</span><br><span class="line">Enabling agmode will remove all the configuration data on the switch</span><br><span class="line">including zoning configuration, FAWWN configuration and security database. Please backup your</span><br><span class="line">configuration using configupload.</span><br><span class="line">This operation will reboot the switch.</span><br><span class="line">Do you want to continue? (yes, y, no, n): [no] y</span><br><span class="line">ERROR: AG mode not allowed while AUTHENTICATION policies are enabled. </span><br><span class="line">Please disable the AUTHENTICATION policies using the CLI authutil --policy -sw(switch)/-dev(device)</span><br><span class="line"></span><br><span class="line">FC_SW:admin&gt; authutil --policy -sw off</span><br><span class="line">Warning: Activating the authentication policy requires either DH-CHAP secrets or PKI certificates depending on the protocol selected. Otherwise, ISLs will be segmented during next E-port bring-up. </span><br><span class="line">ARE YOU SURE  (yes, y, no, n): [no] y</span><br><span class="line">Auth Policy is set to OFF</span><br><span class="line"></span><br><span class="line">FC_SW:admin&gt; ag --modeenable</span><br><span class="line">WARNING: Access Gateway mode changes the standard behavior of the switch. Please check Access Gateway Administrator'</span>s Guide before proceeding.</span><br><span class="line">Enabling agmode will remove all the configuration data on the switch</span><br><span class="line">including zoning configuration, FAWWN configuration and security database. Please backup your</span><br><span class="line">configuration using configupload.</span><br><span class="line">This operation will reboot the switch.</span><br><span class="line">Do you want to <span class="built_in">continue</span>? (yes, y, no, n): [no] y</span><br><span class="line">Access Gateway mode was enabled successfully</span><br><span class="line">Switch is being rebooted...</span><br><span class="line">Please change passwords <span class="keyword">for</span> switch default accounts now.</span><br><span class="line">Use Control-C to <span class="built_in">exit</span> or press <span class="string">'Enter'</span> key to proceed.</span><br></pre></td></tr></table></figure></p>
<p>配置完成后，CX210交换模块自动重启。重启后检查交换机配置<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br></pre></td><td class="code"><pre><span class="line">FC_SW:admin&gt; switchshow </span><br><span class="line">switchName:     FC_SW</span><br><span class="line">switchType:     <span class="number">134.1</span></span><br><span class="line">switchState:    Online   </span><br><span class="line">switchMode:     Access Gateway Mode</span><br><span class="line">switchWwn:      <span class="number">10</span>:<span class="number">00</span>:<span class="number">50</span>:eb:<span class="number">1</span>a:e0:<span class="number">58</span>:a4</span><br><span class="line">switchBeacon:   OFF</span><br><span class="line"></span><br><span class="line">Index Port Address Media Speed       State   Proto</span><br><span class="line">==================================================</span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">010000</span>   cu    <span class="number">8</span>G       No_Sync     FC  Disabled (Persistent) </span><br><span class="line">   <span class="number">1</span>   <span class="number">1</span>   <span class="number">010100</span>   id    N8       Online      FC  N-Port  <span class="number">10</span>:<span class="number">00</span>:<span class="number">50</span>:eb:<span class="number">1</span>a:ba:<span class="number">71</span>:d3 <span class="number">0</span>x010400 (AoQ) </span><br><span class="line">   <span class="number">2</span>   <span class="number">2</span>   <span class="number">010200</span>   id    N8       Online      FC  N-Port  <span class="number">10</span>:<span class="number">00</span>:<span class="number">50</span>:eb:<span class="number">1</span>a:ba:<span class="number">71</span>:d3 <span class="number">0</span>x010500 (AoQ) </span><br><span class="line">   <span class="number">3</span>   <span class="number">3</span>   <span class="number">010300</span>   id    N8       No_Light    FC  </span><br><span class="line">   <span class="number">4</span>   <span class="number">4</span>   <span class="number">010400</span>   id    N8       No_Light    FC  </span><br><span class="line">   <span class="number">5</span>   <span class="number">5</span>   <span class="number">010500</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">6</span>   <span class="number">6</span>   <span class="number">010600</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">7</span>   <span class="number">7</span>   <span class="number">010700</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">8</span>   <span class="number">8</span>   <span class="number">010800</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">9</span>   <span class="number">9</span>   <span class="number">010900</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">10</span>  <span class="number">10</span>   <span class="number">010</span>a00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">11</span>  <span class="number">11</span>   <span class="number">010</span>b00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">12</span>  <span class="number">12</span>   <span class="number">010</span>c00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">13</span>  <span class="number">13</span>   <span class="number">010</span>d00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">14</span>  <span class="number">14</span>   <span class="number">010</span>e00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">15</span>  <span class="number">15</span>   <span class="number">010</span>f00   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">16</span>  <span class="number">16</span>   <span class="number">011000</span>   cu    <span class="number">8</span>G       No_Sync     FC  Disabled (Persistent) </span><br><span class="line">  <span class="number">17</span>  <span class="number">17</span>   <span class="number">011100</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">18</span>  <span class="number">18</span>   <span class="number">011200</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">19</span>  <span class="number">19</span>   <span class="number">011300</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">20</span>  <span class="number">20</span>   <span class="number">011400</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">21</span>  <span class="number">21</span>   <span class="number">011500</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">22</span>  <span class="number">22</span>   <span class="number">011600</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">23</span>  <span class="number">23</span>   <span class="number">011700</span>   cu    <span class="number">8</span>G       No_Sync     FC</span><br></pre></td></tr></table></figure></p>
<p>  CX210模式已经改为AG模式，上连端口类型为N-PORT</p>
<h3 id="端口映射">端口映射</h3><p>  前面已经提到除了对外连接的8个FC接口，还有对应计算节点的16个FC接口。这些接口是如何映射出来的呢？默认对应关系如下：<br>  <figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">  FC_SW:admin&gt; ag --mapshow</span><br><span class="line">N_Port  Configured_F_Ports      Static_F_Ports  Current_F_Ports Failover Failback PG_ID PG_Name</span><br><span class="line">------------------------------------------------------------------------------------------------</span><br><span class="line">   <span class="number">1</span>    <span class="number">9</span>;<span class="number">17</span>                    None            None             <span class="number">1</span>       <span class="number">1</span>         <span class="number">0</span>    pg0</span><br><span class="line">   <span class="number">2</span>    <span class="number">10</span>;<span class="number">18</span>                   None            None             <span class="number">1</span>       <span class="number">1</span>         <span class="number">0</span>    pg0</span><br><span class="line">   <span class="number">3</span>    <span class="number">11</span>;<span class="number">19</span>                   None            None             <span class="number">1</span>       <span class="number">1</span>         <span class="number">0</span>    pg0</span><br><span class="line">   <span class="number">4</span>    <span class="number">12</span>;<span class="number">20</span>                   None            None             <span class="number">1</span>       <span class="number">1</span>         <span class="number">0</span>    pg0</span><br><span class="line">   <span class="number">5</span>    <span class="number">13</span>;<span class="number">21</span>                   None            None             <span class="number">1</span>       <span class="number">1</span>         <span class="number">0</span>    pg0</span><br><span class="line">   <span class="number">6</span>    <span class="number">14</span>;<span class="number">22</span>                   None            None             <span class="number">1</span>       <span class="number">1</span>         <span class="number">0</span>    pg0</span><br><span class="line">   <span class="number">7</span>    <span class="number">15</span>;<span class="number">23</span>                   None            None             <span class="number">1</span>       <span class="number">1</span>         <span class="number">0</span>    pg0</span><br><span class="line">   <span class="number">8</span>    <span class="number">0</span>;<span class="number">16</span>                    None            None             <span class="number">1</span>       <span class="number">1</span>         <span class="number">0</span>    pg0</span><br><span class="line">------------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></p>
<p>由于我们在CX210交换模块上仅激活了前4个FC接口，需要手动修改端口映射关系，不然有的计算节点就要连不出去了。。。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br></pre></td><td class="code"><pre><span class="line">  FC_SW:admin&gt; ag --mapdel <span class="number">1</span> <span class="string">"9;17"</span>       </span><br><span class="line">  FC_SW:admin&gt; ag --mapdel <span class="number">2</span> <span class="string">"10;18"</span>      </span><br><span class="line">  FC_SW:admin&gt; ag --mapdel <span class="number">3</span> <span class="string">"11;19"</span>      </span><br><span class="line">  FC_SW:admin&gt; ag --mapdel <span class="number">4</span> <span class="string">"12;20"</span>      </span><br><span class="line">  FC_SW:admin&gt; ag --mapdel <span class="number">5</span> <span class="string">"13;21"</span>      </span><br><span class="line">  FC_SW:admin&gt; ag --mapdel <span class="number">6</span> <span class="string">"14;22"</span>      </span><br><span class="line">  FC_SW:admin&gt; ag --mapdel <span class="number">7</span> <span class="string">"15;23"</span>      </span><br><span class="line">  FC_SW:admin&gt; ag --mapdel <span class="number">8</span> <span class="string">"16;0"</span>       </span><br><span class="line">                             </span><br><span class="line">  FC_SW:admin&gt; ag --mapadd <span class="number">1</span> <span class="string">"9;10;17;18"</span> </span><br><span class="line">  FC_SW:admin&gt; ag --mapadd <span class="number">2</span> <span class="string">"11;12;19;20"</span></span><br><span class="line">  FC_SW:admin&gt; ag --mapadd <span class="number">3</span> <span class="string">"13;14;21;22"</span></span><br><span class="line">  FC_SW:admin&gt; ag --mapadd <span class="number">4</span> <span class="string">"15;16;23;0"</span> </span><br><span class="line"></span><br><span class="line">FC_SW:admin&gt; ag --mapshow</span><br><span class="line">N_Port  Configured_F_Ports      Static_F_Ports  Current_F_Ports Failover Failback PG_ID        PG_Name</span><br><span class="line">------------------------------------------------------------------------------------------------</span><br><span class="line">   <span class="number">1</span>    <span class="number">9</span>;<span class="number">10</span>;<span class="number">17</span>;<span class="number">18</span>              None            None             <span class="number">1</span>       <span class="number">1</span>       <span class="number">0</span>     pg0</span><br><span class="line">   <span class="number">2</span>    <span class="number">11</span>;<span class="number">12</span>;<span class="number">19</span>;<span class="number">20</span>             None            None             <span class="number">1</span>       <span class="number">1</span>       <span class="number">0</span>     pg0</span><br><span class="line">   <span class="number">3</span>    <span class="number">13</span>;<span class="number">14</span>;<span class="number">21</span>;<span class="number">22</span>             None            None             <span class="number">1</span>       <span class="number">1</span>       <span class="number">0</span>     pg0</span><br><span class="line">   <span class="number">4</span>    <span class="number">0</span>;<span class="number">15</span>;<span class="number">16</span>;<span class="number">23</span>              None            None             <span class="number">1</span>       <span class="number">1</span>       <span class="number">0</span>     pg0</span><br><span class="line">   <span class="number">5</span>    None                    None            None             <span class="number">1</span>       <span class="number">1</span>       <span class="number">0</span>     pg0</span><br><span class="line">   <span class="number">6</span>    None                    None            None             <span class="number">1</span>       <span class="number">1</span>       <span class="number">0</span>     pg0</span><br><span class="line">   <span class="number">7</span>    None                    None            None             <span class="number">1</span>       <span class="number">1</span>       <span class="number">0</span>     pg0</span><br><span class="line">   <span class="number">8</span>    None                    None            None             <span class="number">1</span>       <span class="number">1</span>       <span class="number">0</span>     pg0</span><br><span class="line">------------------------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></p>
<p>最后就是激活端口，内部连接的端口类型为F-Port<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">  FC_SW:admin&gt; portenable <span class="number">1</span></span><br><span class="line">  FC_SW:admin&gt; portenable <span class="number">2</span></span><br><span class="line">  FC_SW:admin&gt; portenable <span class="number">3</span></span><br><span class="line">  FC_SW:admin&gt; portenable <span class="number">4</span></span><br><span class="line"></span><br><span class="line">  FC_SW:root&gt; switchshow </span><br><span class="line">switchName:     FC_SW</span><br><span class="line">switchType:     <span class="number">134.1</span></span><br><span class="line">switchState:    Online   </span><br><span class="line">switchMode:     Access Gateway Mode</span><br><span class="line">switchWwn:      <span class="number">10</span>:<span class="number">00</span>:<span class="number">50</span>:eb:<span class="number">1</span>a:e0:<span class="number">48</span>:ca</span><br><span class="line">switchBeacon:   OFF</span><br><span class="line"></span><br><span class="line">Index Port Address Media Speed       State   Proto</span><br><span class="line">==================================================</span><br><span class="line">   <span class="number">0</span>   <span class="number">0</span>   <span class="number">010000</span>   cu    <span class="number">8</span>G       No_Sync     FC  Disabled (Persistent) </span><br><span class="line">   <span class="number">1</span>   <span class="number">1</span>   <span class="number">010100</span>   id    N8       Online      FC  N-Port  <span class="number">10</span>:<span class="number">00</span>:<span class="number">50</span>:eb:<span class="number">1</span>a:ba:<span class="number">71</span>:d3 <span class="number">0</span>x0d0000 (AoQ) </span><br><span class="line">   <span class="number">2</span>   <span class="number">2</span>   <span class="number">010200</span>   id    N8       Online      FC  N-Port  <span class="number">10</span>:<span class="number">00</span>:<span class="number">50</span>:eb:<span class="number">1</span>a:ba:<span class="number">71</span>:d3 <span class="number">0</span>x0d0100 (AoQ) </span><br><span class="line">   <span class="number">3</span>   <span class="number">3</span>   <span class="number">010300</span>   id    N8       No_Light    FC  </span><br><span class="line">   <span class="number">4</span>   <span class="number">4</span>   <span class="number">010400</span>   id    N8       No_Light    FC  </span><br><span class="line">   <span class="number">5</span>   <span class="number">5</span>   <span class="number">010500</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">6</span>   <span class="number">6</span>   <span class="number">010600</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">7</span>   <span class="number">7</span>   <span class="number">010700</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">8</span>   <span class="number">8</span>   <span class="number">010800</span>   --    N8       No_Module   FC  (No POD License) Disabled</span><br><span class="line">   <span class="number">9</span>   <span class="number">9</span>   <span class="number">010900</span>   cu    <span class="number">8</span>G       Online      FC  F-Port  <span class="number">10</span>:<span class="number">00</span>:e0:<span class="number">36</span>:<span class="number">76</span>:c7:fb:<span class="number">15</span> <span class="number">0</span>x0d0001 </span><br><span class="line">  <span class="number">10</span>  <span class="number">10</span>   <span class="number">010</span>a00   cu    <span class="number">8</span>G       Online      FC  F-Port  <span class="number">10</span>:<span class="number">00</span>:e0:<span class="number">36</span>:<span class="number">76</span>:c6:<span class="number">8</span>d:<span class="number">14</span> <span class="number">0</span>x0d0002 </span><br><span class="line">  <span class="number">11</span>  <span class="number">11</span>   <span class="number">010</span>b00   cu    <span class="number">8</span>G       Online      FC  F-Port  <span class="number">10</span>:<span class="number">00</span>:e0:<span class="number">36</span>:<span class="number">76</span>:c6:ac:<span class="number">12</span> <span class="number">0</span>x0d0101 </span><br><span class="line">  <span class="number">12</span>  <span class="number">12</span>   <span class="number">010</span>c00   cu    <span class="number">8</span>G       Online      FC  F-Port  <span class="number">10</span>:<span class="number">00</span>:e0:<span class="number">36</span>:<span class="number">76</span>:c6:<span class="number">8</span>d:<span class="number">00</span> <span class="number">0</span>x0d0102 </span><br><span class="line">  <span class="number">13</span>  <span class="number">13</span>   <span class="number">010</span>d00   cu    <span class="number">8</span>G       Online      FC  F-Port  <span class="number">10</span>:<span class="number">00</span>:e0:<span class="number">36</span>:<span class="number">76</span>:c7:fb:<span class="number">07</span> <span class="number">0</span>x0d0005 </span><br><span class="line">  <span class="number">14</span>  <span class="number">14</span>   <span class="number">010</span>e00   cu    <span class="number">8</span>G       Online      FC  F-Port  <span class="number">10</span>:<span class="number">00</span>:e0:<span class="number">36</span>:<span class="number">76</span>:c6:<span class="number">8</span>c:d8 <span class="number">0</span>x0d0004 </span><br><span class="line">  <span class="number">15</span>  <span class="number">15</span>   <span class="number">010</span>f00   cu    <span class="number">8</span>G       Online      FC  F-Port  <span class="number">10</span>:<span class="number">00</span>:e0:<span class="number">36</span>:<span class="number">76</span>:c6:<span class="number">8</span>d:<span class="number">9</span>b <span class="number">0</span>x0d0003 </span><br><span class="line">  <span class="number">16</span>  <span class="number">16</span>   <span class="number">011000</span>   cu    <span class="number">8</span>G       No_Sync     FC  Disabled (Persistent) </span><br><span class="line">  <span class="number">17</span>  <span class="number">17</span>   <span class="number">011100</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">18</span>  <span class="number">18</span>   <span class="number">011200</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">19</span>  <span class="number">19</span>   <span class="number">011300</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">20</span>  <span class="number">20</span>   <span class="number">011400</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">21</span>  <span class="number">21</span>   <span class="number">011500</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">22</span>  <span class="number">22</span>   <span class="number">011600</span>   cu    <span class="number">8</span>G       No_Sync     FC  </span><br><span class="line">  <span class="number">23</span>  <span class="number">23</span>   <span class="number">011700</span>   cu    <span class="number">8</span>G       No_Sync     FC</span><br></pre></td></tr></table></figure></p>
<p>现在可以连接SAN交换机，分配存储，开始我们的VMware虚拟化之旅</p>
<h2 id="CX110_以太网交换机模块配置">CX110 以太网交换机模块配置</h2><p>有了共享存储，还需要所有计算节点能够和外部系统连通，这就需要配置CX110以太网交换模块。<br>CX110交换模块对外接口包括4个万兆光口和12个千兆电口，GE电口子卡号为17，取值为1~12；10GE光口子卡号为20，取值为1~4；可以通过任意端口与外部互连。<br>CX110交换模块对内接口包括与前插半宽槽位对应的GE接口以及40GE接口，GE接口子卡号为1~16，取值为1~2，与前插半宽槽位slot01~slot16对应；40GE接口子卡号为18，取值为1~2，实现1E和4E槽位的交换模块或2X和3X槽位的交换模块互连。<br>CX110交换模块GE接口子卡号为19，取值为1~2，2个GE接口分别用于和MM910通信。</p>
<h3 id="配置CX110交换模块堆叠">配置CX110交换模块堆叠</h3><p>两个CX110交换模块堆叠域要求配置一致，优先级高的为主，默认优先级为100。<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">[~HUAWEI]stack</span><br><span class="line">[~HUAWEI-stack]stack member <span class="number">1</span> domain <span class="number">10</span> </span><br><span class="line">Info: The operation takes effect only after the save <span class="built_in">command</span> is executed. The device with a lower priority <span class="keyword">then</span> will be reset <span class="keyword">in</span> the stack merging scenario.</span><br><span class="line"></span><br><span class="line">[*HUAWEI-stack]stack member <span class="number">1</span> priority <span class="number">150</span> </span><br><span class="line">Info: The operation will take effect after reboot.</span><br><span class="line">[*HUAWEI-stack]commit</span><br></pre></td></tr></table></figure></p>
<p>将两个40GE接口配置为堆叠模式，并加入到堆叠端口<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">[~HUAWEI]interface <span class="number">40</span>GE <span class="number">1</span>/<span class="number">18</span>/<span class="number">1</span> </span><br><span class="line">[~HUAWEI-<span class="number">40</span>GE1/<span class="number">18</span>/<span class="number">1</span>]port mode stack </span><br><span class="line">[*HUAWEI-<span class="number">40</span>GE1/<span class="number">18</span>/<span class="number">1</span>]commit</span><br><span class="line">[~HUAWEI-<span class="number">40</span>GE1/<span class="number">18</span>/<span class="number">1</span>]quit</span><br><span class="line"></span><br><span class="line">[~HUAWEI]interface <span class="number">40</span>GE <span class="number">1</span>/<span class="number">18</span>/<span class="number">2</span> </span><br><span class="line">[~HUAWEI-<span class="number">40</span>GE1/<span class="number">18</span>/<span class="number">2</span>]port mode stack </span><br><span class="line">[*HUAWEI-<span class="number">40</span>GE1/<span class="number">18</span>/<span class="number">2</span>]commit</span><br><span class="line">[~HUAWEI-<span class="number">40</span>GE1/<span class="number">18</span>/<span class="number">2</span>]quit</span><br><span class="line"></span><br><span class="line">[~HUAWEI]interface Stack-Port <span class="number">1</span>/<span class="number">1</span></span><br><span class="line">[*HUAWEI-Stack-Port1/<span class="number">1</span>]port member-group interface <span class="number">40</span>GE <span class="number">1</span>/<span class="number">18</span>/<span class="number">1</span> to <span class="number">1</span>/<span class="number">18</span>/<span class="number">2</span> </span><br><span class="line">[*HUAWEI-Stack-Port1/<span class="number">1</span>]commit</span><br><span class="line">[~HUAWEI-Stack-Port1/<span class="number">1</span>]quit</span><br></pre></td></tr></table></figure></p>
<p>打开堆叠端口<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">[~HUAWEI]interface range <span class="number">40</span>GE <span class="number">1</span>/<span class="number">18</span>/<span class="number">1</span> to <span class="number">40</span>GE <span class="number">1</span>/<span class="number">18</span>/<span class="number">2</span> </span><br><span class="line">[~HUAWEI-port-group]undo shutdown </span><br><span class="line">[*HUAWEI-port-group]commit</span><br><span class="line">[~HUAWEI-port-group]quit</span><br></pre></td></tr></table></figure></p>
<p>保存配置并重启<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line">&lt;HUAWEI&gt;save </span><br><span class="line">Warning: The current configuration will be written to the device. Continue? [Y/N]:y</span><br><span class="line">Now saving the current configuration to the slot <span class="number">1</span> </span><br><span class="line">Info: Save the configuration successfully.</span><br><span class="line"></span><br><span class="line">slot <span class="number">1</span>: generate <span class="built_in">local</span> config file successfully.</span><br><span class="line">&lt;HUAWEI&gt;reboot </span><br><span class="line">slot <span class="number">1</span>:</span><br><span class="line">Next startup system software: flash:/CX110-Switch-V3.<span class="number">13</span>.cc</span><br><span class="line">Next startup saved-configuration file: flash:/vrpcfg.zip</span><br><span class="line">Next startup paf file: default</span><br><span class="line">Next startup patch package: flash:/CX110-Switch-V3.<span class="number">13</span>-SPH003.PAT</span><br><span class="line"></span><br><span class="line">begin synchronize configuration to SMM ...</span><br><span class="line">slot <span class="number">1</span>: configuration is the same with SMM, needn<span class="string">'t sync to SMM.</span><br><span class="line"></span><br><span class="line">Warning: The system will reboot. Continue? [Y/N]:y</span></span><br></pre></td></tr></table></figure></p>
<p>检查堆叠状态<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;HUAWEI&gt;display stack </span><br><span class="line">----------------------------------------------------------------------------------</span><br><span class="line">MemberID Role     MAC              Priority   Device Type     Bay/Chassis         </span><br><span class="line">----------------------------------------------------------------------------------</span><br><span class="line"><span class="number">1</span>        Master   <span class="number">0</span>c45-baa5-<span class="number">4690</span>   <span class="number">150</span>        CX110           <span class="number">1</span>E/<span class="number">1</span>                </span><br><span class="line"><span class="number">4</span>        Standby  <span class="number">0</span>c45-baa5-<span class="number">4710</span>   <span class="number">100</span>        CX110           <span class="number">4</span>E/<span class="number">1</span>                </span><br><span class="line">----------------------------------------------------------------------------------</span><br></pre></td></tr></table></figure></p>
<h3 id="配置CX110交换模块上连">配置CX110交换模块上连</h3><p>使用4个万兆光口作为上连接口，通过绑定实现40G的上连带宽<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">[~HUAWEI]interface Eth-Trunk <span class="number">24</span></span><br><span class="line">[*HUAWEI-Eth-Trunk24]trunkport <span class="number">10</span>GE <span class="number">1</span>/<span class="number">20</span>/<span class="number">1</span></span><br><span class="line">[*HUAWEI-Eth-Trunk24]trunkport <span class="number">10</span>GE <span class="number">1</span>/<span class="number">20</span>/<span class="number">2</span></span><br><span class="line">[*HUAWEI-Eth-Trunk24]trunkport <span class="number">10</span>GE <span class="number">4</span>/<span class="number">20</span>/<span class="number">1</span></span><br><span class="line">[*HUAWEI-Eth-Trunk24]trunkport <span class="number">10</span>GE <span class="number">4</span>/<span class="number">20</span>/<span class="number">2</span></span><br><span class="line">[*HUAWEI-Eth-Trunk24]commit</span><br><span class="line">[~HUAWEI-Eth-Trunk24]quit</span><br><span class="line"></span><br><span class="line">[~HUAWEI]display eth-trunk <span class="number">24</span></span><br><span class="line">Eth-Trunk24<span class="string">'s state information is:</span><br><span class="line">Working Mode: Normal        Hash Arithmetic: profile default</span><br><span class="line">Least Active-linknumber: 1  Max Bandwidth-affected-linknumber: 16</span><br><span class="line">Operating Status: up        Number of Up Ports in Trunk: 4</span><br><span class="line">--------------------------------------------------------------------------------</span><br><span class="line">PortName                      Status      Weight</span><br><span class="line">10GE1/20/1                    Up          1          </span><br><span class="line">10GE1/20/2                    Up          1          </span><br><span class="line">10GE4/20/1                    Up          1          </span><br><span class="line">10GE4/20/2                    Up          1</span></span><br></pre></td></tr></table></figure></p>
<p>配置端口类型为trunk，并允许指定的vlan通过<br><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">[~HUAWEI]vlan batch <span class="number">21</span> to <span class="number">35</span> <span class="number">50</span> to <span class="number">52</span></span><br><span class="line">[*HUAWEI]interface Eth-Trunk <span class="number">24</span></span><br><span class="line">[*HUAWEI-Eth-Trunk24]port link-type trunk </span><br><span class="line">[*HUAWEI-Eth-Trunk24]port trunk allow-pass vlan <span class="number">21</span> to <span class="number">35</span> <span class="number">50</span> to <span class="number">52</span></span><br><span class="line">[*HUAWEI-Eth-Trunk24]commit</span><br><span class="line">[~HUAWEI-Eth-Trunk24]quit</span><br></pre></td></tr></table></figure></p>
<p>最后，配置CX110对内的网络端口，刀片服务器就可以正常与外部通信啦！</p>
<p>第一篇啰啰嗦嗦的写了不少，准备好了刀片服务器环境，下面就要开始在上面部署VMware 6.0虚拟化平台了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://yoursite.com/2015/12/24/Huawei E9000 Switch Module/" data-id="cijdtimeh0000j8iaz6p40zot" class="article-share-link">Share</a>
      
      
    </footer>
  </div>
  
    
<nav id="article-nav">
  
    <a href="/2016/01/16/Vmware vsphere & vcenter 6.0/" id="article-nav-newer" class="article-nav-link-wrap">
      <strong class="article-nav-caption">Newer</strong>
      <div class="article-nav-title">
        
          VMware vsphere &amp; vcenter 6.0
        
      </div>
    </a>
  
  
</nav>

  
</article>

</section>
        
          <aside id="sidebar">
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Categories</h3>
    <div class="widget">
      <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/VMware/">VMware</a><span class="category-list-count">2</span></li></ul>
    </div>
  </div>

  
    
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2016/01/">January 2016</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2015/12/">December 2015</a><span class="archive-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2016/01/16/Vmware vsphere & vcenter 6.0/">VMware vsphere &amp; vcenter 6.0</a>
          </li>
        
          <li>
            <a href="/2015/12/24/Huawei E9000 Switch Module/">Huawei E9000 Switch Module Configure</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2016 gamblegod<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    

<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">
  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>


<script src="/js/script.js" type="text/javascript"></script>

  </div>
</body>
</html>